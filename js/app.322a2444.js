(function(){"use strict";var t={6505:function(t,s,a){var e=a(6369),i=function(){var t=this,s=t._self._c;return s("router-view")},n=[],r={},o=r,l=a(1001),c=(0,l.Z)(o,i,n,!1,null,null,null),u=c.exports,h=a(2631),d=function(){var t=this,s=t._self._c;return s("div",[s("van-nav-bar",{attrs:{fixed:"",title:t.$route.meta.title}}),s("div",{staticClass:"main"},[s("router-view")],1),s("van-tabbar",{attrs:{route:""}},[s("van-tabbar-item",{attrs:{to:"/layout/home",icon:"home-o"}},[t._v("Happy everyday😝")]),s("van-tabbar-item",{attrs:{to:"/layout/search",icon:"search"}},[t._v("可以在这搜索👍")])],1)],1)},p=[],f={},m=f,v=(0,l.Z)(m,d,p,!1,null,null,null),y=v.exports,g=function(){var t=this,s=t._self._c;return s("div",{staticClass:"play"},[s("div",{staticClass:"song-bg",style:`background-image: url(${t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl}?imageView&thumbnail=360y360&quality=75&tostatic=0);`}),s("div",{staticClass:"header"},[s("van-icon",{staticClass:"left-incon",attrs:{name:"arrow-left",size:"20"},on:{click:function(s){return t.$router.back()}}})],1),s("div",{staticClass:"song-wrapper"},[s("div",{staticClass:"song-turn ani",style:"animation-play-state:"+(t.playState?"running":"paused")},[s("div",{staticClass:"song-img"},[s("img",{staticStyle:{width:"100%"},attrs:{src:`${t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl}?imageView&thumbnail=360y360&quality=75&tostatic=0`,alt:""}})])]),s("div",{staticClass:"start-box",on:{click:t.audioStart}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.playState,expression:"!playState"}],staticClass:"song-start"})]),s("div",{staticClass:"song-msg"},[s("h2",{staticClass:"m-song-h2"},[s("span",{staticClass:"m-song-sname"},[t._v(t._s(t.songInfo.name)+"-"+t._s(t.songInfo&&t.songInfo.ar&&t.songInfo.ar[0].name))])]),s("div",{staticClass:"lrcContent"},[s("p",{staticClass:"lrc"},[t._v(t._s(t.curLyric))])])]),s("div",{staticClass:"needle",style:`transform: rotate(${t.needleDeg});`})]),s("audio",{ref:"audio",attrs:{preload:"true",src:`https://music.163.com/song/media/outer/url?id=${t.id}.mp3`}})])},_=[],b=(a(5825),a(9858)),w=a(6265),Z=a.n(w);const C=Z().create({baseURL:"http://music.zllhyy.cn/"});var k=C;const L=t=>k({url:`/song/detail?ids=${t}`,method:"GET"}),P=t=>k({url:`/lyric?id=${t}`,method:"GET"});var $={components:{[b.Z.name]:b.Z},name:"play",data(){return{playState:!1,id:this.$route.query.id,songInfo:{},lyric:{},curLyric:"",lastLy:""}},computed:{needleDeg(){return this.playState?"-7deg":"-38deg"}},methods:{async getSong(){const t=await L(this.id);this.songInfo=t.data.songs[0];const s=await P(this.id),a=s.data.lrc.lyric;this.lyric=this._formatLyr(a),this.curLyric=this.lyric[0]},_formatLyr(t){let s=/\[.+?\]/g,a=t.match(s),e=t.split(/\[.+?\]/).slice(1),i={};return a.forEach(((t,s)=>{let a=60*t.split(":")[0].split("")[2],n="0"===t.split(":")[1].split(".")[0].split("")[0]?t.split(":")[1].split(".")[0].split("")[1]:t.split(":")[1].split(".")[0];i[a+Number(n)]=e[s]})),i},audioStart(){this.playState?this.$refs.audio.pause():this.$refs.audio.play(),this.playState=!this.playState},showLyric(){this.$refs.audio.ontimeupdate=()=>{let t=Math.floor(this.$refs.audio.currentTime);this.lyric[t]?(this.curLyric=this.lyric[t],this.lastLy=this.curLyric):this.curLyric=this.lastLy}}},mounted(){this.getSong(),this.showLyric()},beforeDestroy(){this.$refs.audio.ontimeupdate=null}},x=$,S=(0,l.Z)(x,g,_,!1,null,"d0432b68",null),I=S.exports,O=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"title"},[t._v("莹的专用播放器")]),s("div",{staticClass:"pic-box"},[s("van-row",{attrs:{gutter:"2"}},t._l(4,(function(e){return s("van-col",{key:e.id,attrs:{span:"6"}},[s("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a(4707),alt:""}}),s("div",{staticClass:"song_name"},[t._v(t._s(e.name))])])})),1)],1),s("div",[s("div",{staticClass:"title"},[t._v("Hoshi")]),s("van-cell-group",t._l(t.musicList,(function(t){return s("MusicCell",{key:t.id,attrs:{title:t.name,id:t.id,label:`${t.song.artists[0].name} - ${t.name}`}})})),1)],1)])},j=[];const T=t=>k({url:"/personalized",params:{limit:t}}),z=t=>k({url:"/personalized/newsong?sb="+Date.now(),params:t});var H={data(){return{musicList:[],recList:[],value:5}},async created(){const t=await T(6);this.recList=t.data.result;const s=await z();this.musicList=s.data.result}},M=H,q=(0,l.Z)(M,O,j,!1,null,null,null),D=q.exports,E=function(){var t=this,s=t._self._c;return s("div",[s("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{input:t.clickHot},model:{value:t.key,callback:function(s){t.key=s},expression:"key"}}),""==t.key?s("div",{staticClass:"search_wrap"},[s("div",{staticClass:"hot_title"},[t._v("可以在这搜索👍")]),s("div",{staticClass:"hot_name_wrap"},t._l(t.hotList,(function(a,e){return s("span",{key:e,staticClass:"hot_item",on:{click:function(s){return t.clickHot(a.first)}}},[t._v(t._s(a.first))])})),0)]):s("div",{staticClass:"search_wrap"},[s("div",{staticClass:"hot_title"},[t._v("最佳匹配")]),s("van-cell-group",t._l(t.searchList,(function(t){return s("MusicCell",{key:t.id,attrs:{id:t.id,title:t.name,label:`${t.artists[0].name} - ${t.name}`}})})),1)],1)],1)},U=[];const G=()=>k({url:"/search/hot"}),N=t=>k({url:"/search",params:t});var V={data(){return{key:"",hotList:[],searchList:[]}},async created(){const t=await G();console.log(t),this.hotList=t.data.result.hots,console.log(this.hotList)},methods:{async clickHot(t){if(""==t.trim)return;this.key=t;const s=await N({keywords:t});this.searchList=s.data.result.songs}}},F=V,R=(0,l.Z)(F,E,U,!1,null,null,null),A=R.exports;e.ZP.use(h.ZP);const B=[{path:"/",redirect:"/layout/home"},{name:"layout",path:"/layout",component:y,children:[{name:"home",path:"home",component:D,meta:{title:"首页"}},{name:"search",path:"search",component:A,meta:{title:"搜索"}}]},{name:"play",path:"/play",component:I}],J=new h.ZP({routes:B});var K=J,Q=(a(7938),a(2628)),W=(a(319),a(9245)),X=(a(9031),a(6790)),Y=(a(4399),a(5947)),tt=(a(9495),a(2217)),st=(a(2443),a(9864)),at=(a(7322),a(6631)),et=(a(8984),a(797)),it=(a(3412),a(5083));e.ZP.use(it.Z),e.ZP.use(et.Z),e.ZP.use(b.Z),e.ZP.use(at.Z),e.ZP.use(st.Z),e.ZP.use(tt.Z),e.ZP.use(Y.Z),e.ZP.use(X.Z),e.ZP.use(W.Z),e.ZP.use(Q.Z);var nt=function(){var t=this,s=t._self._c;return s("van-cell",{attrs:{title:t.title,label:t.label},on:{click:t.toPlay},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("van-icon",{attrs:{size:"24",name:"play-circle-o"},on:{click:t.toPlay}})],1)]},proxy:!0}])})},rt=[],ot={props:["title","label","id"],methods:{toPlay(){this.$router.push({name:"play",query:{id:this.id}})}}},lt=ot,ct=(0,l.Z)(lt,nt,rt,!1,null,null,null),ut=ct.exports;e.ZP.config.productionTip=!1,e.ZP.component("MusicCell",ut),new e.ZP({router:K,render:t=>t(u)}).$mount("#app")},4707:function(t,s,a){t.exports=a.p+"img/d122b119b02a6e77241e4352c6de7ca.9a5a7801.jpg"}},s={};function a(e){var i=s[e];if(void 0!==i)return i.exports;var n=s[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(s,e,i,n){if(!e){var r=1/0;for(u=0;u<t.length;u++){e=t[u][0],i=t[u][1],n=t[u][2];for(var o=!0,l=0;l<e.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(t){return a.O[t](e[l])}))?e.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(u--,1);var c=i();void 0!==c&&(s=c)}}return s}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[e,i,n]}}(),function(){a.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(s,{a:s}),s}}(),function(){a.d=function(t,s){for(var e in s)a.o(s,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){a.p=""}(),function(){var t={143:0};a.O.j=function(s){return 0===t[s]};var s=function(s,e){var i,n,r=e[0],o=e[1],l=e[2],c=0;if(r.some((function(s){return 0!==t[s]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var u=l(a)}for(s&&s(e);c<r.length;c++)n=r[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(u)},e=self["webpackChunkmusic"]=self["webpackChunkmusic"]||[];e.forEach(s.bind(null,0)),e.push=s.bind(null,e.push.bind(e))}();var e=a.O(void 0,[998],(function(){return a(6505)}));e=a.O(e)})();
//# sourceMappingURL=app.322a2444.js.map